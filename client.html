<!doctype html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>WebSocket Test</title>
  </head>
  <body>
    <div id="content"></div>
    <input type="text" id="input" />
    <br />
    <button id="btn">Send message</button>
    <h3>Message List :</h3>
    <ul id="container"></ul>

    <script>
      var ws;
      var btn = document.getElementById("btn");
      var input = document.getElementById("input");
      var content = document.getElementById("content");
      var ul = document.getElementById("container");
      btn.addEventListener("click", function () {
        console.log("click");
        ws.send(input.value);
      });
      window.onload = function () {
        ws = new WebSocket("ws://localhost:5555");
        ws.addEventListener("open", (event) => {
          console.log("Handshake successfull");
        });
        ws.onerror = function (e) {
          console.log("e", e);
        };
        ws.addEventListener("message", (event) => {
          console.log("Message from server : ", event.data);
          const li = document.createElement("li");
          li.textContent = event.data;
          ul.appendChild(li);
        });
      };
      window.onclose = function () {
        ws.close();
      };
    </script>
  </body>
</html>
